{% extends "base.html" %}
{% load static %}

{% block title %}รายละเอียดคำขอ | Ticket System{% endblock %}

{% block content %}
<div class="dashboard-table shadow-sm p-4 bg-white rounded">

    <!-- Header -->
    <div class="d-flex justify-content-between align-items-start mb-4">
        <div>
            <h4 class="fw-bold text-primary mb-1">
                <i class="fas fa-project-diagram me-2"></i>รายละเอียดคำขอ #1001
            </h4>
            <p class="text-muted small mb-0">คอมพิวเตอร์เปิดไม่ติด</p>
        </div>
        <span class="badge bg-warning-subtle text-warning border px-3 py-2">
            รอดำเนินการ
        </span>
    </div>

    <!-- Summary -->
    <div class="row g-3 mb-4">
        <div class="col-md-4">
            <div class="p-3 bg-light rounded border h-100">
                <div class="text-muted small">ผู้แจ้ง</div>
                <div class="fw-semibold">user01</div>
            </div>
        </div>
        <div class="col-md-4">
            <div class="p-3 bg-light rounded border h-100">
                <div class="text-muted small">หมวดหมู่</div>
                <div class="fw-semibold">อุปกรณ์ IT</div>
            </div>
        </div>
        <div class="col-md-4">
            <div class="p-3 bg-light rounded border h-100">
                <div class="text-muted small">สถานะปัจจุบัน</div>
                <div class="fw-bold text-warning">รอดำเนินการ</div>
            </div>
        </div>
    </div>

    <hr class="my-4">

    <!-- Workflow -->
    <h5 class="fw-bold mb-3">
        <i class="fas fa-stream me-2"></i>แผนผังการดำเนินงาน
    </h5>

    <div class="workflow">

        <div class="workflow-step done">
            <div class="icon"><i class="fas fa-paper-plane"></i></div>
            <h6>ผู้ใช้ส่งคำขอ</h6>
            <small>user01</small>
        </div>

        <div class="workflow-step done">
            <div class="icon"><i class="fas fa-user-tie"></i></div>
            <h6>หัวหน้าฝ่าย</h6>
            <small>John Smith</small>
        </div>

        <div class="workflow-step done">
            <div class="icon"><i class="fas fa-crown"></i></div>
            <h6>CEO อนุมัติ</h6>
            <small>อนุมัติแล้ว</small>
        </div>

        <div class="workflow-step done">
            <div class="icon"><i class="fas fa-user-check"></i></div>
            <h6>แอดมินอนุมัติ</h6>
            <small>admin_No.1</small>
        </div>

        <div class="workflow-step active">
            <div class="icon"><i class="fas fa-hourglass-half"></i></div>
            <h6>รอดำเนินการ</h6>
            <small>ชื่อผู้รับงาน</small>
        </div>

        <div class="workflow-step pending">
            <div class="icon"><i class="fas fa-check-circle"></i></div>
            <h6>เสร็จสิ้น</h6>
            <small>ปิดงาน</small>
        </div>

    </div>

    <div class="text-end mt-4 border-top pt-3">
        <a href="/tickets/" class="btn btn-outline-secondary">
            <i class="fas fa-arrow-left me-1"></i> กลับหน้ารายการ
        </a>
    </div>

</div>

<style>
/* Workflow (ใช้ theme เดียวกับ dashboard-table) */
.workflow {
    display: flex;
    align-items: center;
    justify-content: space-between;
    position: relative;
    margin-top: 30px;
}

.workflow::before {
    content: "";
    position: absolute;
    top: 50%;
    left: 0;
    right: 0;
    height: 4px;
    background: #dee2e6;
    z-index: 0;
}

.workflow-step {
    background: #fff;
    padding: 16px;
    border-radius: 14px;
    width: 160px;
    text-align: center;
    z-index: 1;
    border: 1px solid #dee2e6;
}

.workflow-step .icon {
    width: 46px;
    height: 46px;
    border-radius: 50%;
    margin: 0 auto 8px;
    display: flex;
    align-items: center;
    justify-content: center;
    color: #fff;
    font-size: 18px;
}

.workflow-step h6 {
    font-weight: 700;
    margin-bottom: 2px;
}

.workflow-step small {
    color: #6c757d;
}

.done .icon { background: #198754; }
.active .icon {
    background: #0d6efd;
    animation: pulse 1.4s infinite;
}
.pending .icon { background: #adb5bd; }

@keyframes pulse {
    0% { box-shadow: 0 0 0 0 rgba(13,110,253,.5); }
    70% { box-shadow: 0 0 0 10px rgba(13,110,253,0); }
    100% { box-shadow: 0 0 0 0 rgba(13,110,253,0); }
}
</style>
{% endblock %}
